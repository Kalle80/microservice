general:
  whitelist: true
  pipeline_base_name: Prod Deployment
  dependency:
   - Microservice_Acceptance [PostStage]

pre_stage:
  go_cd_agent_props:
    - java:8
    - clojure
#    - maven
  custom_cmd:
    - lein -v
#    - true

production:
  go_cd_agent_props:
    - ansible
  trigger_mode: automatic
  type: parallel
  commands:
    - tasks:
      - cmd: true
#      - cmd: ansible-playbook -i ansible-scripts/inventory ansible-scripts/microservice-playbook.yml
#        build_path: .
#        run_if_conditions: failed
      job_name: AnsiblePlaybookRun
#        build_path: .
#      - cmd: docker 1
#      job_name: AnsibleJob
#    - tasks:
#      - cmd: mvn 2
#        build_path: .
#      - cmd: docker 2
#        build_path: .
#      job_name: RunJob

post_stage:
  go_cd_agent_props:
    - java:8
    - leiningen
#    - maven
  custom_cmd:
    - lein -v
#    - true
